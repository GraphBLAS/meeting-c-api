# 2022-08-08 GraphBLAS C API Committee

Attendees:
  - Will Kimmerer
  - Manoj Kumar
  - Jim Kitchen
  - Erik Welch
  - Tim Mattson

## More Discussion on Type Introspection Proposal

Manoj: Summary of Tim D's proposal

- Distributed computing will require serializing/deserializing Matrices
- Who owns the requirement to allocate space, for example with `extractTuples`
- What does type metadata look like? Just the name? Full C typedef as a string?

Erik: Strawman proposal

1. GrB_Type_new -> add `const char *type_name`
2. [new] GrB_Type_name
3. [new] GrB_Type_size
4. [new] GrB_Type_from_name
5. [new] GrB_<object>_type
6. [new] GrB_Type_isequal -> may not be necessary if we comparse strings
7. GrB_Matrix_deserialize -> no longer pass in the type; throw error if UDT named type is not registered
8. GrB_Type_free -> do we need to give the name for proper cleanup?
9. Possibly add get types of arguments for UDFs


Q: What are valid strings to type name?

- any null-terminated string
- valid C identifier
- disallow strings that begin with "GrB_" and empty string

Q: What is the max length for type name?

- no limit
- 128 or 256 (including null?)

Q: What are the names of the builtin types?

- GrB_BOOL, GrB_FP32, etc
- bool, float, double, etc

Tim M: Going cross-language will push us into using the GrB_XXX names

Q: Who owns the `char *` memory?

Will: Should be a copy on type creation and when reading. Simply avoid the issue of string ownership.

Manoj: Copying might be better from a security point of view.

Will: Creating a GrB_Type: GraphBLAS copies to internal structure. Reading a type name: User provides a char*, GraphBLAS fills it.
    
Q: Do we need a type equality compare function?

Let's leave as a ??? for now. Could be useful, but hopefully we can compare strings to test equality.

## Action Items

- [ ] [*Tim M*] Dig into current spec for consistency in string ownership
- [ ] [*Erik*] Send out proposal and notes for review
- [ ] [*Jim*] Strawman proposal for serialize/deserialize
